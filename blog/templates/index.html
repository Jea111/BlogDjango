{% extends 'layout/navbar.html' %} {% load static %} {% block title %}
Blog-Tienda{% endblock %} {% block content %}

<div class="container">
  <div class="row">
    <div class="col-md-4 mt-4 mb-4 g-4 p-4">
      <div class="card">
        <div id="carrito"></div>
      </div>
    </div>

    <div class="col-md-8 mt-4 mb-4 g-4 p-4">
      <div class="card p-3">
        <form method="GET" action="{% url 'blog_search' %}">
          <input
            type="text"
            name="q"
            placeholder="Busca por título"
            value="{{ query|default:'' }}"
            class="form-control mb-2"
          />
          <button class="btn btn-success" type="submit">Buscar</button>
        </form>

        <hr />

        {% if blogs_inp %} {% for s in blogs_inp %}
        <h4>{{ s.titulo }}</h4>
        <img
          src="{{s.portada.url}}"
          alt="{{s.titulo}}"
          class="img-fluid rounded shadow-sm w-100 mb-3"
          style="max-width: 400px; height: auto"
        />

        <div class="d-grid mt-3">
          <button class="btn btn-success rounded-pill add_to_cart">
            <ion-icon name="cart"></ion-icon>
          </button>
        </div>

        {% empty %}
        <p>No se encontraron resultados.</p>
        {% endfor %} {% endif %}
      </div>
    </div>
  </div>
</div>

<div
  class="d-flex flex-wrap justify-content-center gap-4 mb-sm-5 mt-sm-5 pt-sm-3 pb-sm-3"
>
  {% for b in blogs_all %}
  <div class="card shadow-sm border-0" style="width: 20rem">
    {% if b.disponible %}
    <span class="badge bg-success rounded-pill d-block mx-auto"
      >Disponible</span
    >
    {% else %}
    <span class="badge bg-danger rounded-pill d-block mx-auto"
      >No disponible</span
    >
    {% endif %} {% if b.portada %}
    <img
      src="{{ b.portada.url }}"
      class="card-img img-fluid"
      alt="{{ b.titulo }}"
      style="height: 200px; object-fit: contain"
    />
    {% else %}
    <img
      src="{% static 'img/default.jpg' %}"
      class="card-img-top img-fluid"
      alt="Sin portada"
      style="height: 200px; object-fit: contain"
    />
    {% endif %}

    <div class="card-body">
      <h4 class="card-title text-center text-uppercase text-success mb-3">
        {{ b.titulo }}
      </h4>
      <p class="card-text text-center mb-2 text-capitalize text-bg-dark|">
        <span class="badge bg-success">Autor</span><br />
        {{ b.autor }}
      </p>
      <span class="rounded-pill bg-success precioProducto">{{b.precio}}</span>
      <p class="text-muted small text-center visually-hidden">{{ b.fecha }}</p>

      {% if b.disponible %}

      <div class="d-grid mt-3">
        <button
          class="btn btn-success rounded-pill add_to_cart alertBtn"
          data-producto="{{ b.nombre }}"
        >
          <ion-icon name="cart"></ion-icon>
        </button>
      </div>
      {% else %}
      <div class="d-grid mt-3">
        <button
          class="btn btn-success rounded-pill add_to_cart visually-hidden"
        >
          <ion-icon name="cart"></ion-icon>
        </button>
      </div>
      {% endif %}
    </div>
  </div>
  {% empty %}
  <p class="text-center text-muted">No hay blogs disponibles.</p>
  {% endfor %}
</div>
<div class="container my-5">
  <div class="row g-4 align-items-center">
    <!-- Sección Sobre nosotros -->
    <div class="col-lg-6" id="abouh">
      <div class="card shadow-lg border-0 rounded-4">
        <div class="card-body p-4">
          <h3 class="text-center text-success mb-4 text-uppercase fw-bold">
            Sobre Nosotros
          </h3>
          <hr />
          <p>
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Nulla dolor
            asperiores molestias facere, esse, aspernatur dicta nesciunt illo
            ullam nostrum veritatis nobis nisi odio iste natus voluptates.
            Aliquid, totam voluptates?
          </p>
        </div>
      </div>
    </div>

    <!-- nuestra direccion -->
    <div class="col-lg-6">
      <div class="card shadow-lg border-0 rounded-4 overflow-hidden">
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3966.1220957127575!2d-75.56839022592084!3d6.247637593740738!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e4429d444104df7%3A0x591da3490ca09224!2sLa%20Librer%C3%ADa!5e0!3m2!1sen!2sco!4v1761242506672!5m2!1sen!2sco"
          width="100%"
          height="350"
          style="border: 0"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
        ></iframe>
      </div>
    </div>
  </div>
</div>

<script
  type="module"
  src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
></script>

<link
  rel="stylesheet"
  type="text/css"
  href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css"
/>
<script
  type="text/javascript"
  src="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.js"
></script>

<script
  nomodule
  src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
></script>
<script src="{% static 'js/script.js' %}"></script>
{% endblock %}
