{% extends 'layout/navbar.html' %} {% load static %} {% block title %}
Blog-Tienda {% endblock %} {% block content %}

<div
  id="carouselExampleFade"
  class="carousel slide carousel-fade"
  data-aos="zoom-in-down"
  data-aos-duration="3000"
>
  <div class="carousel-inner" id="inicio">
    <div class="carousel-item active">
      <img
        src="/media/media/hero-img.webp"
        class="d-block w-100"
        alt="Hero principal"
        style="max-height: 500px; object-fit: cover"
      />
    </div>
    <div class="carousel-item">
      <img
        src="/media/media/portada-gabo.jfif"
        class="d-block w-100"
        alt=""
        style="max-height: 500px; object-fit: contain"
      />
    </div>
  </div>
  <button
    class="carousel-control-prev"
    type="button"
    data-bs-target="#carouselExampleFade"
    data-bs-slide="prev"
  >
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button
    class="carousel-control-next"
    type="button"
    data-bs-target="#carouselExampleFade"
    data-bs-slide="next"
  >
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<div class="container mt-4 text-end">
  <button
    class="btn btn-outline-success position-relative"
    data-bs-toggle="offcanvas"
    data-bs-target="#offcanvasCart"
  >
    <i class="bi bi-cart3"></i> Carrito
    <!-- <span
      class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
      id="cart-count"
    >
      0
    </span> -->
  </button>
</div>

<div
  class="offcanvas offcanvas-end"
  tabindex="-1"
  id="offcanvasCart"
  aria-labelledby="offcanvasCartLabel"
>
  <div class="offcanvas-header bg-success text-white">
    <h5 class="offcanvas-title" id="offcanvasCartLabel">Tu Carrito</h5>
    <button
      type="button"
      class="btn-close btn-close-white"
      data-bs-dismiss="offcanvas"
    ></button>
  </div>
  <div class="offcanvas-body">
    <div id="carrito" class="mb-3"></div>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-md-4 mt-4 mb-4 g-4 p-4"></div>

<!-- PRODUCTOS DISPONIBLES -->
<div
  class="d-flex flex-wrap justify-content-center gap-4 mb-sm-5 mt-sm-5 pt-sm-3 pb-sm-3"
  data-aos="zoom-out-up"
  data-aos-duration="3000"
>
  {% for b in blogs_all %}
  <div class="card shadow-sm border-0" style="width: 20rem">
    {% if b.disponible %}
    <span class="badge bg-success rounded-pill d-block mx-auto"
      >Disponible</span
    >
    {% else %}
    <span class="badge bg-danger rounded-pill d-block mx-auto"
      >No disponible</span
    >
    {% endif %} {% if b.portada %}
    <img
      src="{{ b.portada.url }}"
      class="card-img img-fluid"
      alt="{{ b.titulo }}"
      style="height: 200px; object-fit: contain"
      data-aos="zoom-out"
      data-aos-duration="1500"
    />
    {% else %}
    <img
      src="{% static 'img/default.jpg' %}"
      class="card-img-top img-fluid"
      alt="Sin portada"
      style="height: 200px; object-fit: contain"
    />
    {% endif %}

    <div class="card-body">
      <h4 class="card-title text-center text-uppercase text-success mb-3">
        {{ b.titulo }}
      </h4>
      <p class="card-text text-center mb-2 text-capitalize text-bg-dark|">
        <span class="badge bg-success">Autor</span><br />
        {{ b.autor }}
      </p>
      <span class="text-muted text-end precioProducto">{{ b.precio }}</span>
      <p class="text-muted small text-center visually-hidden">{{ b.fecha }}</p>

      {% if b.disponible %}
      <div class="d-grid mt-3">
        <button
          class="btn btn-outline-success w-100 add_to_cart alertBtn"
          data-producto="{{ b.titulo }}"
        >
          <i class="bi bi-cart-plus"></i> Agregar al carrito
        </button>
      </div>
      <div class="d-grid mt-3">
        <span class="badge rounded-pill bg-info">
          <a href="{% url 'blog_comentado' b.id %}"> Ver reseñas</a></span
        >
      </div>
      {% else %}
      <div class="d-grid mt-3">
        <button
          class="btn btn-success rounded-pill add_to_cart visually-hidden"
        >
          <ion-icon name="cart"></ion-icon>
        </button>
      </div>
      {% endif %}
    </div>
  </div>
  {% empty %}
  <p class="text-center text-muted">No hay blogs disponibles.</p>
  {% endfor %}
</div>

<!-- SOBRE NOSOTROS Y CALIFICACIONES -->
<div class="container my-5">
  <div class="row g-4 align-items-center">
    <div class="col-lg-4" id="abouh">
      <div class="card shadow-lg border-0 rounded-4">
        <div class="card-body p-4">
          <h3 class="text-center text-success mb-4 text-uppercase fw-bold">
            Sobre Nosotros
          </h3>
          <hr />
          <p>
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Nulla dolor
            asperiores molestias facere, esse, aspernatur dicta nesciunt illo
            ullam nostrum veritatis nobis nisi odio iste natus voluptates.
            Aliquid, totam voluptates?
          </p>
        </div>
      </div>
    </div>

    <div class="col-lg-4">
      <div class="card shadow-lg border-0 rounded-4 overflow-hidden">
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3966.1220957127575!2d-75.56839022592084!3d6.247637593740738!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e4429d444104df7%3A0x591da3490ca09224!2sLa%20Librer%C3%ADa!5e0!3m2!1sen!2sco!4v1761242506672!5m2!1sen!2sco"
          width="100%"
          height="350"
          style="border: 0"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
        ></iframe>
      </div>
    </div>

    <div class="col-lg-4" id="calificaciones">
      <div class="card shadow-lg border-0 rounded-4">
        <div class="card-body p-4">
          <h3 class="text-center text-success mb-4 text-uppercase fw-bold">
            Calificaciones
          </h3>
          
<!-- reseñas  -->


 {% if mensaje %}
  <div class="alert alert-warning text-center">{{ mensaje }}</div>
  {% endif %}

  <h3 class="mt-4 mb-3">Últimas reseñas</h3>
  <ul class="list-group">
    {% for r in reseñas %}
    <li class="list-group-item">
      <strong>{{ r.usuario.nombre }}</strong>
      <span class="text-warning">({{ r.calificacion_tienda }}⭐)</span><br />
      {{ r.comentario_tienda }}
      <div class="text-muted small">{{ r.created_at|date:"d/m/Y H:i" }}</div>
    </li>
    {% empty %}
    <li class="list-group-item text-muted">Aún no hay reseñas.</li>
    {% endfor %}
  </ul>
</div>

               
              </div>
            </li>
          </ul>

          
         
        </div>
      </div>
    </div>
  </div>
</div>







<script
  type="module"
  src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
></script>
<link
  rel="stylesheet"
  type="text/css"
  href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css"
/>
<script
  type="text/javascript"
  src="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.js"
></script>
<script
  nomodule
  src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
></script>
<script src="{% static 'js/script.js' %}"></script>

{% endblock %}
